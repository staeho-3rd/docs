<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Ncloud 서비스 중에서 길고 복잡한 URL을 간단하고 짧게 바꿔주는 API nShortURL을 PHP로 이용하는 샘플 예제입니다">
<meta name="keywords" content="applicationphp,  Application, PHP">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>PHP로 nShortURL 서비스 이용하기 샘플 예제</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="PHP로 nShortURL 서비스 이용하기 샘플 예제" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<meta property="og:description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<link rel="canonical" href="staeho-3rd.github.io/application-service/ncloud_application_service_nshorturl_php_sample.html" />
<meta property="og:url" content="staeho-3rd.github.io/application-service/ncloud_application_service_nshorturl_php_sample.html" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PHP로 nShortURL 서비스 이용하기 샘플 예제" />
<script type="application/ld+json">
{"@type":"WebPage","url":"staeho-3rd.github.io/application-service/ncloud_application_service_nshorturl_php_sample.html","description":"Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features.","headline":"PHP로 nShortURL 서비스 이용하기 샘플 예제","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

<title>PHP로 nShortURL 서비스 이용하기 샘플 예제 | 써드아이시스템 기술문서</title>
<link rel="stylesheet" href="/css/syntax.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<!--link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
<link rel="stylesheet" href="/css/customstyles.css">
<link rel="stylesheet" href="/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/css/theme-ncloud.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<!--script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/customscripts.js"></script>

<link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="staeho-3rd.github.io/feed.xml">



    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {                
                if (!$("#tg-sb-link").attr("hide_sidebar"))
                {
                    $("#tg-sb-sidebar").toggle();
                    $("#tg-sb-content").toggleClass('col-md-9');
                    $("#tg-sb-content").toggleClass('col-md-12');
                    $("#tg-sb-icon").toggleClass('fa-toggle-on');
                    $("#tg-sb-icon").toggleClass('fa-toggle-off');
                }
            });
        });
    </script>
    

</head>
<body>
<header>
<!-- Navigation -->
<nav class="navbar2 navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fas fa-home fa-lg navbar-brand" href="/index.html">&nbsp;<span class="projectTitle"> 3RDEYESYS Tech Docs</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-center">
                <!-- toggle sidebar button -->                
                <li><a id="tg-sb-link" hide_sidebar="" href="#"><i id="tg-sb-icon" class="fas fa-toggle-on"></i> Nav</a></li>                
                <!-- entries without drop-downs appear here -->




                
                
                                
                <li><a href="/news">News</a></li>
                
                
                
                
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/mydoc_introduction.html">Jekyll Documentation Theme</a></li>
                        
                        
                        
                        <li><a href="/p1_landing_page.html">Product 1</a></li>
                        
                        
                        
                        <li><a href="/p2_landing_page.html">Product 2</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                
                
                
                <li><a href="https://3rdeyesys.com/" target="_blank" rel="noopener">Company</a></li>                                
                
                
                
                <li><a href="https://www.3rdeyesys.com/question/" target="_blank" rel="noopener">1:1 문의하기</a></li>                                
                
                 
                               
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">                        
                            <div style="width:223px"><form action="/search/search.html" method="get">
	<input type="search" name="q" id="search-input-nav" onfocus="this.placeholder=''" onblur="this.placeholder='Search'" placeholder="Search">
	<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>
	<input type="submit" value="Search" style="display: none;">
</form> </div>                                               
                    </div>                    
                    <!--end search-->
                </li>
                
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>




</header>
<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Technical Documentation </li>
  
  
  
  <li>
      <a title="Compute" href="#">Compute</a>
      <ul>
          
          
          
          <li><a title="VPC 환경에서 서버 생성" href="/compute/server/ncloud_server_vpc_create.html">VPC 환경에서 서버 생성</a></li>
          
          
          
          <li class="subfolders">
              <a title="Cloud Functions" href="#">Cloud Functions</a>
              <ul>
                  
                  
                  
                  <li><a title="Cloud Functions Action을 .Net (C#)을 사용하여 윈도우 명령프롬프트(cmd)에서 만드는 방법" href="/compute/cloud_functions/ncloud_server_cloud_functions_dotnet_csharp_cmd.html">Cloud Functions Action을 .Net (C#)을 사용하여 윈도우 명령프롬프트(cmd)에서 만드는 방법</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Networking" href="#">Networking</a>
      <ul>
          
          
          
          <li><a title="주요 서비스 포트(Port) 정보" href="/networking/ncloud_networking_service_port_info.html">주요 서비스 포트(Port) 정보</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Storage" href="#">Storage</a>
      <ul>
          
          
          
          <li><a title="네이버 클라우드 스토리지 비교" href="/storage/ncloud_storage_compare.html">네이버 클라우드 스토리지 비교</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Database" href="#">Database</a>
      <ul>
          
          
          
          <li><a title="설치형 DB서버와 관리형 Cloud DB 비교" href="/database/ncloud_database_compare.html">설치형 DB서버와 관리형 Cloud DB 비교</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Security" href="#">Security</a>
      <ul>
          
          
          
          <li><a title="Security 서비스 요약" href="/security/ncloud_security_service_summary.html">Security 서비스 요약</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Management" href="#">Management</a>
      <ul>
          
          
          
          <li><a title="Sub Account 생성 가이드" href="/management/ncloud_sub_account_guide.html">Sub Account 생성 가이드</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Analytics" href="#">Analytics</a>
      <ul>
          
          
          
          <li><a title="Cloud Log Analytics에서 수집하는 로그 유형" href="/analytics/ncloud_analytics_cloud_log_analytics_info.html">Cloud Log Analytics에서 수집하는 로그 유형</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="API" href="#">API</a>
      <ul>
          
          
          
          <li><a title="PHP로 Ncloud API를 호출하는 샘플 예제" href="/api/ncloud_api_call_php_sample.html">PHP로 Ncloud API를 호출하는 샘플 예제</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Application Service" href="#">Application Service</a>
      <ul>
          
          
          
          <li class="active"><a title="PHP로 nShortURL 서비스 이용하기 샘플 예제" href="/application-service/ncloud_application_service_nshorturl_php_sample.html">PHP로 nShortURL 서비스 이용하기 샘플 예제</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Media" href="#">Media</a>
      <ul>
          
          
          
          <li><a title="Video Player 구현하기 샘플 예제" href="/media/ncloud_media_video_player_sample.html">Video Player 구현하기 샘플 예제</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="AWS" href="#">AWS</a>
      <ul>
          
          
          
          <li><a title="AWS S3 수명 주기 (LifeCycle) 설정하기" href="/aws/aws_s3_lifecycle_management.html">AWS S3 수명 주기 (LifeCycle) 설정하기</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="ETC" href="#">ETC</a>
      <ul>
          
          
          
          <li><a title="Pdf 문서 합치기 PHP로 구현하는 방법" href="/etc/etc_pdf_merge_php_sample.html">Pdf 문서 합치기 PHP로 구현하는 방법</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Tag archives" href="#">Tag archives</a>
      <ul>
          
          
          
          <li><a title="Tag archives overview" href="/mydoc_tag_archives_overview.html">Tag archives overview</a></li>
          
          
          
          <li class="subfolders">
              <a title="Tag archive pages" href="#">Tag archive pages</a>
              <ul>
                  
                  
                  
                  <li><a title="VPC pages" href="/tag/tag_vpc.html">VPC pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Cloud Functions pages" href="/tag/tag_cloud_functions.html">Cloud Functions pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title=".Net (C#) pages" href="/tag/tag_csharp.html">.Net (C#) pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Account pages" href="/tag/tag_account.html">Account pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Log pages" href="/tag/tag_log.html">Log pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Analytics pages" href="/tag/tag_analytics.html">Analytics pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="API pages" href="/tag/tag_api.html">API pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="PHP pages" href="/tag/tag_php.html">PHP pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Media pages" href="/tag/tag_media.html">Media pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Object Storage pages" href="/tag/tag_object_storage.html">Object Storage pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="AWS pages" href="/tag/tag_object_aws.html">AWS pages</a></li>
                  
                  
                  
                  
                  
                  <li><a title="S3 pages" href="/tag/tag_object_s3.html">S3 pages</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>



            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">PHP로 nShortURL 서비스 이용하기 샘플 예제</h1>
</div>



<div class="post-content">

   
    <div class="summary">Ncloud 서비스 중에서 길고 복잡한 URL을 간단하고 짧게 바꿔주는 API nShortURL을 PHP로 이용하는 샘플 예제입니다</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>



    

   <h2 id="개요">개요</h2>
<p>SNS를 사용하거나 SMS를 보낼 때 길고 복잡한 URL은 무척 불편하기에 짧게 바꿔주는 서비스들이 인기를 얻었습니다.<br />
대표적으로 goo.gl, bit.ly 등이 있는데 현재 구글의 goo.gl는 서비스가 종료되었습니다.<br />
그래서 이를 대신해서 네이버 클라우드에 있는 길고 복잡한 URL을 간단하고 짧게 바꿔주는 API 서비스 nShortURL 서비스를 추천합니다.
nShortURL은 OpenAPI 형태로 제공되는데 여기서는 PHP로 호출하는 방식을 살펴볼텐데, 우선 전체 소스코드를 살펴보고 다음으로 주요 코드를 상세하게 살펴보겠습니다.</p>

<h2 id="이용-요금">이용 요금</h2>
<p><strong>nShortURL은 무료로 제공되는 서비스</strong>이며, 일 25,000건, 월 750,000건 내에서 사용 가능하며 상향이 필요한 경우 고객지원으로 문의하면 됩니다.</p>

<h2 id="api-이용-신청">API 이용 신청</h2>
<p>nShortURL을 이용하기 위해서는 [네이버 클라우드 콘솔] - [AI·NAVER API] -  [Application]에서 등록을 해야 합니다.<br />
아래와 같이 NAVER 서비스에서 nShortURL을 선택하고, 이름과 사용할 서비스 환경을 입력하고 등록하면 됩니다.<br />
nShortURL은 웹페이지, 모바일앱 어디서든 사용 가능하며 URL이나 앱 패키지이름, Bundle ID 등을 입력하시면 됩니다.</p>

<figure><img class="docimage" src="/images/application-service/ncp_application_service_nshorturl_php_01.jpg" alt="PHP로 nShortURL 서비스 이용하기 샘플 예제" style="width: 850px; max-width: 100%" /><figcaption></figcaption></figure>

<p>Application 등록을 하고 나면 다음과 같은 화면을 볼 수 있는데 여기서 인증 정보를 확인해야 합니다.</p>

<figure><img class="docimage" src="/images/application-service/ncp_application_service_nshorturl_php_02.jpg" alt="PHP로 nShortURL 서비스 이용하기 샘플 예제" style="width: 850px; max-width: 100%" /><figcaption></figcaption></figure>

<h2 id="인증키-확인">인증키 확인</h2>
<p>nShortURL API를 호출하려면 Client ID와 Client Secret 로 이루어진 Application Key를 사용해야 하는데 아래와 같이 [인증 정보] 버튼을 클릭하면 확인할 수 있습니다.</p>

<figure><img class="docimage" src="/images/application-service/ncp_application_service_nshorturl_php_03.jpg" alt="PHP로 nShortURL 서비스 이용하기 샘플 예제" style="width: 850px; max-width: 100%" /><figcaption></figcaption></figure>

<h2 id="api-호출-샘플-코드">API 호출 샘플 코드</h2>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
	
	<span class="nv">$long_url</span> <span class="o">=</span> <span class="s2">"변환할 URL"</span><span class="p">;</span>	
		
	<span class="nv">$client_id</span> <span class="o">=</span> <span class="s2">"Client ID"</span><span class="p">;</span>
	<span class="nv">$client_secret</span> <span class="o">=</span> <span class="s2">"Client Secret"</span><span class="p">;</span>
	<span class="nv">$api_url</span> <span class="o">=</span> <span class="s2">"https://naveropenapi.apigw.ntruss.com/util/v1/shorturl"</span><span class="p">;</span>
	<span class="nv">$enc_url</span> <span class="o">=</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$long_url</span><span class="p">);</span>
	<span class="nv">$postvars</span> <span class="o">=</span> <span class="s2">"url="</span><span class="mf">.</span><span class="nv">$enc_url</span><span class="p">;</span>	
	<span class="nv">$is_post</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

	<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$api_url</span><span class="p">);</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="nv">$is_post</span><span class="p">);</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$postvars</span><span class="p">);</span>

	<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
	<span class="nv">$headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"X-NCP-APIGW-API-KEY-ID: "</span><span class="mf">.</span><span class="nv">$client_id</span><span class="p">;</span>
	<span class="nv">$headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"X-NCP-APIGW-API-KEY: "</span><span class="mf">.</span><span class="nv">$client_secret</span><span class="p">;</span>

	<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="nv">$headers</span><span class="p">);</span>

	<span class="nv">$json_response</span> <span class="o">=</span> <span class="nb">curl_exec</span> <span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

	<span class="nv">$status_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLINFO_HTTP_CODE</span><span class="p">);</span>

	<span class="nb">curl_close</span> <span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

	<span class="k">if</span><span class="p">(</span><span class="nv">$status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> 
	<span class="p">{</span>
		<span class="nv">$rows_response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json_response</span><span class="p">,</span> <span class="no">JSON_OBJECT_AS_ARRAY</span><span class="p">);</span>
		<span class="nv">$rows_result</span> <span class="o">=</span> <span class="nv">$rows_response</span><span class="p">[</span><span class="s2">"result"</span><span class="p">];</span>
		<span class="nv">$short_url</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"url"</span><span class="p">];</span>
		<span class="nv">$hash_val</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"hash"</span><span class="p">];</span>
		<span class="nv">$org_url</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"orgUrl"</span><span class="p">];</span>
	<span class="p">}</span> 
	<span class="k">else</span> 
	<span class="p">{</span>
		<span class="nv">$short_url</span> <span class="o">=</span> <span class="s2">"Error 내용:"</span><span class="mf">.</span><span class="nv">$json_response</span><span class="p">;</span>
	<span class="p">}</span>

<span class="cp">?&gt;</span>
</code></pre></div></div>

<h2 id="코드-상세-설명">코드 상세 설명</h2>
<p><br /></p>
<h3 id="application-key">Application Key</h3>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$client_id</span> <span class="o">=</span> <span class="s2">"Client ID"</span><span class="p">;</span>
<span class="nv">$client_secret</span> <span class="o">=</span> <span class="s2">"Client Secret"</span><span class="p">;</span>
</code></pre></div></div>
<p>네이버 클라우드 콘솔에서 nShortURL 서비스를 등록하고 인증 정보에서 확인한 [Client ID] 와 [Client Secret]를 가져와서 사용하면 됩니다.</p>

<h3 id="api-url">API URL</h3>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$api_url</span> <span class="o">=</span> <span class="s2">"https://naveropenapi.apigw.ntruss.com/util/v1/shorturl"</span><span class="p">;</span>
</code></pre></div></div>

<p>nShortURL의 API URL은 위와 같습니다.</p>

<h3 id="파라미터-설정">파라미터 설정</h3>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$enc_url</span> <span class="o">=</span> <span class="nb">urlencode</span><span class="p">(</span><span class="nv">$long_url</span><span class="p">);</span>
<span class="nv">$postvars</span> <span class="o">=</span> <span class="s2">"url="</span><span class="mf">.</span><span class="nv">$enc_url</span><span class="p">;</span>	
<span class="nv">$is_post</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre></div></div>
<p>변환할 URL을 urlencode로 인코딩하고, POST 방식으로 호출하면서 넘겨줄 변수에 할당합니다.</p>

<h3 id="http-호출-헤더값-설정">http 호출 헤더값 설정</h3>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"X-NCP-APIGW-API-KEY-ID: "</span><span class="mf">.</span><span class="nv">$client_id</span><span class="p">;</span>
<span class="nv">$headers</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"X-NCP-APIGW-API-KEY: "</span><span class="mf">.</span><span class="nv">$client_secret</span><span class="p">;</span>
</code></pre></div></div>
<p>위에서 가져온 Application Key를 호출할 API에 헤더값으로 설정해서 호출하게 됩니다.</p>

<h3 id="결과값-반환">결과값 반환</h3>
<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$rows_response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$json_response</span><span class="p">,</span> <span class="no">JSON_OBJECT_AS_ARRAY</span><span class="p">);</span>
<span class="nv">$rows_result</span> <span class="o">=</span> <span class="nv">$rows_response</span><span class="p">[</span><span class="s2">"result"</span><span class="p">];</span>
<span class="nv">$short_url</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"url"</span><span class="p">];</span>
<span class="nv">$hash_val</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"hash"</span><span class="p">];</span>
<span class="nv">$org_url</span> <span class="o">=</span> <span class="nv">$rows_result</span><span class="p">[</span><span class="s2">"orgUrl"</span><span class="p">];</span>
</code></pre></div></div>
<p>nShortURL에서 json형태로 반환된 값을 배열에 담아 사용하면 됩니다.<br />
반환되는 값은 짧게 변환된 URL와 해시값, 그리고 원본 URL입니다.</p>

<h2 id="사용-한도-및-알람-설정">사용 한도 및 알람 설정</h2>
<p>nShortURL 서비스는 과도한 사용을 방지하기 위해 일별 25,000회, 월별 750,000회의 제한이 있습니다.<br />
그리고 지정된 한도 내에서 일정한 사용을 초과하면 알람을 받도록 설정할 수 있습니다.<br />
아래처럼 Application 등록 화면에서 [한도 및 알람 설정] 버튼을 클릭하면 확인할 수 있습니다.</p>

<figure><img class="docimage" src="/images/application-service/ncp_application_service_nshorturl_php_04.jpg" alt="PHP로 nShortURL 서비스 이용하기 샘플 예제" style="width: 850px; max-width: 100%" /><figcaption></figcaption></figure>

<h2 id="참고-url">참고 URL</h2>
<p><a href="https://api.ncloud-docs.com/docs/ai-naver-nshorturl" target="_blank" style="word-break:break-all;">https://api.ncloud-docs.com/docs/ai-naver-nshorturl</a></p>

   
    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="/tag_application.html" class="btn btn-default navbar-btn cursorNorm" role="button">application</a>
        
        
        
        <a href="/tag_php.html" class="btn btn-default navbar-btn cursorNorm" role="button">php</a>
        
        
        
    </div>
   

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2022 Copyright 3RDEYESYSTEM Corp. All rights reserved. <br />
<span>Page last updated:</span> 2021-04-30<br/> Site last generated: 2022-01-26 <br />
<p><img src="/images/3rdeyesys_logo_white.png" alt="Company logo" style="filter: brightness(0.1);"/></p>
                </div>
            </div>
</footer>






        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>
<script>
    $(function() {
        $('svg').click(function() {
            $(this).parent('form').submit();
        });
    });
</script>

</body>
</html>


